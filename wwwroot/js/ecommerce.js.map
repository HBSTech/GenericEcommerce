{"version":3,"sources":["webpack://asp.net/./src/implementation/AddToCartRepo.ts","webpack://asp.net/./src/implementation/CheckoutRepo.ts","webpack://asp.net/./src/implementation/EcommerceClassRepo.ts","webpack://asp.net/./src/implementation/ShoppingCartRepo.ts","webpack://asp.net/webpack/bootstrap","webpack://asp.net/webpack/runtime/define property getters","webpack://asp.net/webpack/runtime/hasOwnProperty shorthand","webpack://asp.net/webpack/runtime/make namespace object","webpack://asp.net/./src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAa;AACb,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AAC0D;AACnD;AACP;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA,4CAA4C,kFAAiC;AAC7E;AACA,SAAS;AACT;AACA;AACA;AACA,qDAAqD,+BAA+B,EAAE;AACtF;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;;ACzCa;AACb,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AAC0D;AACnD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,iBAAiB;AAClE;AACA;AACA,iDAAiD,iBAAiB;AAClE;AACA;AACA,8CAA8C,UAAU,+CAA+C,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kDAAkD,iBAAiB;AACnE;AACA;AACA,gDAAgD,iBAAiB;AACjE;AACA;AACA,uDAAuD,iBAAiB;AACxE;AACA;AACA,wDAAwD,iBAAiB;AACzE;AACA;AACA,uDAAuD,iBAAiB;AACxE;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA,gBAAgB,qFAAoC;AACpD;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA,gBAAgB,qFAAoC;AACpD;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA,gBAAgB,qFAAoC;AACpD;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B,GAAG;AACnD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kCAAkC,iCAAiC,EAAE;AACrE;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kCAAkC,kCAAkC,EAAE;AACtE;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B,EAAE,iBAAiB;AACnE,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B,EAAE,iBAAiB;AACnE,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA,gBAAgB,qFAAoC;AACpD,gBAAgB,qFAAoC;AACpD;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;ACvRa;AACb,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,cAAc,6CAA6C;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,kBAAkB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;;AC1HA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AAC0D;AACnD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA,2BAA2B,8EAA6B;AACxD;AACA;AACA,6BAA6B,wEAAuB;AACpD;AACA;AACA,2BAA2B,8EAA6B;AACxD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA,sBAAsB,2EAA0B;AAChD,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wEAAuB;AACxD;AACA;AACA,yBAAyB,kFAAiC;AAC1D,aAAa;AACb;AACA;AACA;AACA;AACA,mCAAmC,2EAA0B;AAC7D,sCAAsC,8EAA6B;AACnE;AACA;AACA;AACA;AACA;AACA,gDAAgD,kFAAiC;AACjF;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;UChGA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;;;;;ACN+D;AACF;AACY;AACJ;AAC9D;AACP;AACA;AACA;AACA,8BAA8B,wEAAa;AAC3C;AACA;AACA,8BAA8B,sEAAY;AAC1C;AACA;AACA,0BAA0B,kFAAkB;AAC5C;AACA;AACA,8BAA8B,8EAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA","file":"../wwwroot/js/ecommerce.js","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { EcommerceClassRepo } from \"./EcommerceClassRepo\";\r\nexport class AddToCartRepo {\r\n    addItem(event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let response = yield EcommerceClassRepo.ajax(\"/ShoppingCart/Add\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(event.detail),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var result = yield response.json();\r\n                document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(result.message));\r\n            }\r\n        });\r\n    }\r\n    addToCartEvent(el) {\r\n        var customFields = {};\r\n        Object.keys(el.dataset).filter(function (f) { return /^customField/.test(f); }).forEach(function (key) {\r\n            customFields[key] = el.dataset[key] || \"\";\r\n        });\r\n        var model = {\r\n            \"sKUGUID\": el.dataset.sku,\r\n            \"quantity\": el.dataset.quantity\r\n        };\r\n        if (Object.keys(customFields).length > 0) {\r\n            model[\"customFields\"] = customFields;\r\n        }\r\n        return new CustomEvent(\"add-to-cart\", {\r\n            detail: model\r\n        });\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { EcommerceClassRepo } from \"./EcommerceClassRepo\";\r\nexport class CheckoutRepo {\r\n    constructor() {\r\n        this.paymentEvent = new Event(\"payment\");\r\n        this.orderGUID = \"\";\r\n        this.createOrderEvent = new Event(\"create-order\");\r\n        this.updateOrderEvent = new Event(\"update-order\");\r\n        this.getCountriesEvent = new Event(\"get-countries\");\r\n        this.customerCreated = document.body.querySelector(\".customer[data-customerexists]\") != null;\r\n        this.getAddressesEvent = new Event(\"get-addresses\");\r\n    }\r\n    redeemCouponEvent(coupon) {\r\n        return new CustomEvent(\"redeem-coupon\", { detail: coupon });\r\n    }\r\n    removeCouponEvent(coupon) {\r\n        return new CustomEvent(\"remove-coupon\", { detail: coupon });\r\n    }\r\n    getStatesEvent(selectId, countryId) {\r\n        return new CustomEvent(\"get-states\", { detail: { \"selectId\": selectId, \"countryId\": countryId } });\r\n    }\r\n    getAddressEvent(addressID, addressType) {\r\n        return new CustomEvent(\"get-address\", {\r\n            detail: {\r\n                \"addressID\": addressID,\r\n                \"addressType\": addressType\r\n            }\r\n        });\r\n    }\r\n    paymentResultEvent(result) {\r\n        return new CustomEvent(\"payment-result\", { detail: result });\r\n    }\r\n    setCustomerEvent(result) {\r\n        return new CustomEvent(\"set-customer\", { detail: result });\r\n    }\r\n    setBillingAddressEvent(result) {\r\n        return new CustomEvent(\"set-billing-address\", { detail: result });\r\n    }\r\n    setShippingAddressEvent(result) {\r\n        return new CustomEvent(\"set-shipping-address\", { detail: result });\r\n    }\r\n    setShippingOptionEvent(result) {\r\n        return new CustomEvent(\"set-shipping-option\", { detail: result });\r\n    }\r\n    setPaymentOptionEvent(result) {\r\n        return new CustomEvent(\"set-payment-option\", { detail: result });\r\n    }\r\n    getOrder() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetOrder\");\r\n            if (response.ok) {\r\n                return yield response.text();\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n    getShippingOptions(selectId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetShippingOptions\");\r\n            if (response.ok) {\r\n                var options = yield response.json();\r\n                EcommerceClassRepo.applyDropdownList(selectId, options);\r\n            }\r\n        });\r\n    }\r\n    getPaymentOptions() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetPaymentOptions\");\r\n            if (response.ok) {\r\n                var options = yield response.json();\r\n                return options;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n    getCountries(selectId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetCountries\");\r\n            if (response.ok) {\r\n                var options = yield response.json();\r\n                EcommerceClassRepo.applyDropdownList(selectId, options);\r\n            }\r\n        });\r\n    }\r\n    getStates(selectId, countryId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetStates\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(countryId),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var options = yield response.json();\r\n                EcommerceClassRepo.applyDropdownList(selectId, options);\r\n            }\r\n        });\r\n    }\r\n    getPaymentForm() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Payment/GetPaymentForm\");\r\n            if (response.ok) {\r\n                return yield response.text();\r\n            }\r\n            else {\r\n                return '';\r\n            }\r\n        });\r\n    }\r\n    createOrder() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/CreatOrder\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON({}),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var order = yield response.json();\r\n                if (!order.orderFailed) {\r\n                    this.orderGUID = order.orderGUID;\r\n                    document.body.dispatchEvent(this.paymentEvent);\r\n                }\r\n                else {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(order.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    setCustomer(customer) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/SetCustomer\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(customer),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n                this.customerCreated = true;\r\n            }\r\n        });\r\n    }\r\n    setBillingAddress(address) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.customerCreated) {\r\n                setTimeout(() => { this.setBillingAddress(address); }, 500);\r\n                return;\r\n            }\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/SetBillingAddress\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(address),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    setShippingAddress(address) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.customerCreated) {\r\n                setTimeout(() => { this.setShippingAddress(address); }, 500);\r\n                return;\r\n            }\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/SetShippingAddress\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(address),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    setShippingOption(id) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/SetShippingOption\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON({ \"optionID\": id }),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    setPaymentOption(id) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/SetPaymentOption\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON({ \"optionID\": id }),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    redeemCoupon(coupon) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/AddCoupon\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(coupon),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    removeCoupon(coupon) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/RemoveCoupon\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(coupon),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (json.message) {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getAddresses(shippingID, billingID) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetAddresses\");\r\n            if (response.ok) {\r\n                var options = (yield response.json());\r\n                EcommerceClassRepo.applyDropdownList(billingID, options);\r\n                EcommerceClassRepo.applyDropdownList(shippingID, options);\r\n            }\r\n        });\r\n    }\r\n    getAddress(addressID) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/Checkout/GetAddress\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(addressID),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                return (yield response.json());\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport class EcommerceClassRepo {\r\n    static tokenInput() {\r\n        return \"__RequestVerificationToken\";\r\n    }\r\n    static showAlert(alert) {\r\n        console.log(alert);\r\n    }\r\n    static showAlertEvent(message) {\r\n        return new CustomEvent(\"show-alert\", { detail: message });\r\n    }\r\n    static getJSON(dict) {\r\n        return JSON.stringify(dict);\r\n    }\r\n    static getPostHeaders(name) {\r\n        var elName = name ? name : this.tokenInput();\r\n        var els = document.getElementsByName(elName);\r\n        var token = els.length > 0 ? els[0].value : \"\";\r\n        var tokenName = elName.replace(\"__\", \"\");\r\n        var dict = { 'Content-Type': 'application/json' };\r\n        dict[tokenName] = token;\r\n        return dict;\r\n    }\r\n    static closest(elem, selector) {\r\n        for (; elem && elem.nodeName !== document.nodeName; elem = elem.parentNode) {\r\n            if (elem.matches(selector))\r\n                return elem;\r\n        }\r\n        return null;\r\n    }\r\n    static serializeForm(form) {\r\n        var obj = {};\r\n        var formData = new FormData(form);\r\n        formData.forEach(function (value, key, parent) {\r\n            obj[key] = value.valueOf();\r\n        });\r\n        return obj;\r\n    }\r\n    static replaceForm(event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            event.preventDefault();\r\n            var form = event.target;\r\n            var response = yield fetch(form.action, {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(this.serializeForm(form)),\r\n                headers: this.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var header = response.headers.get(\"content-type\");\r\n                if (header !== null && header.indexOf(\"application/json\") !== -1) {\r\n                    var json = yield response.json();\r\n                    if (json.message) {\r\n                        document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                    }\r\n                }\r\n                else {\r\n                    var html = yield response.text();\r\n                    if (html.length > 0) {\r\n                        var domObj = new DOMParser();\r\n                        var item = domObj.parseFromString(html, \"text/html\");\r\n                        form.replaceWith(item);\r\n                    }\r\n                    else {\r\n                        form.remove();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static decodeHTML(encodedString) {\r\n        var _a;\r\n        var txt = document.createElement('textarea');\r\n        txt.innerHTML = encodedString;\r\n        var div = document.createElement('div');\r\n        div.innerHTML = txt.value;\r\n        return (_a = div.firstChild) === null || _a === void 0 ? void 0 : _a.getRootNode();\r\n    }\r\n    static applyDropdownList(selectId, list) {\r\n        var select = document.body.querySelector(selectId);\r\n        if (select) {\r\n            var optionHtml = \"\";\r\n            if (list) {\r\n                for (var i = 0; i < list.length; i++) {\r\n                    var item = list[i];\r\n                    optionHtml += '<option value=\"' + item.value + '\"' + (item.selected ? ' selected=\"true\"' : '') + '>' + item.text + \"</option>\";\r\n                }\r\n            }\r\n            select.innerHTML = optionHtml;\r\n        }\r\n    }\r\n    static bootstrapValidate(id) {\r\n        var selector = document.querySelector(id);\r\n        if (selector && !selector.classList.contains(\"was-validated\")) {\r\n            selector.classList.add(\"was-validated\");\r\n        }\r\n    }\r\n    static ajax(url, options, message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            document.body.dispatchEvent(new CustomEvent(\"ajax-before\", { detail: message }));\r\n            var ajaxCall;\r\n            if (options) {\r\n                ajaxCall = fetch(url, options);\r\n            }\r\n            else {\r\n                ajaxCall = fetch(url);\r\n            }\r\n            ajaxCall.then((response) => {\r\n                document.body.dispatchEvent(new Event(\"ajax-after\"));\r\n                return response;\r\n            });\r\n            return ajaxCall;\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { EcommerceClassRepo } from \"./EcommerceClassRepo\";\r\nexport class ShoppingCartRepo {\r\n    constructor() {\r\n        this.returnShoppingEvent = new Event(\"return-shopping\");\r\n        this.updateTotalsEvent = new Event(\"update-cart\");\r\n    }\r\n    updateTotals() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var totalToFreeShipping = document.getElementById(\"free-shipping-promotion\");\r\n            var totals = document.getElementById(\"cart-totals\");\r\n            var response = yield EcommerceClassRepo.ajax(\"/ShoppingCart/GetTotals\");\r\n            if (response.ok) {\r\n                var html = yield response.text();\r\n                var item = EcommerceClassRepo.decodeHTML(html) || \"\";\r\n                totals === null || totals === void 0 ? void 0 : totals.replaceWith(item);\r\n            }\r\n            response = yield EcommerceClassRepo.ajax(\"/ShoppingCart/GetTotalTillFreeShipping\");\r\n            if (response.ok) {\r\n                var html = yield response.text();\r\n                var item = EcommerceClassRepo.decodeHTML(html) || \"\";\r\n                totalToFreeShipping === null || totalToFreeShipping === void 0 ? void 0 : totalToFreeShipping.replaceWith(item);\r\n            }\r\n        });\r\n    }\r\n    updateItem(event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var response = yield EcommerceClassRepo.ajax(\"/ShoppingCart/Update\", {\r\n                method: \"POST\",\r\n                body: EcommerceClassRepo.getJSON(event.detail),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (!json.message && event.detail.priceEl != null) {\r\n                    console.log(event.detail);\r\n                    event.detail.priceEl.innerHTML = json.price;\r\n                }\r\n                else {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n                this.updateTotals();\r\n            }\r\n        });\r\n    }\r\n    removeItem(event) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var parent = event.detail.parent;\r\n            var id = (_b = (_a = parent.querySelector(\"input[name=ID]\")) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : 0;\r\n            console.log(id);\r\n            var response = yield EcommerceClassRepo.ajax(\"/ShoppingCart/RemoveItem\", {\r\n                method: \"POST\",\r\n                body: id.toString(),\r\n                headers: EcommerceClassRepo.getPostHeaders()\r\n            });\r\n            if (response.ok) {\r\n                var json = yield response.json();\r\n                if (!json.message) {\r\n                    if (json.html) {\r\n                        var cart = EcommerceClassRepo.closest(parent, \".cart-content\");\r\n                        var newNode = EcommerceClassRepo.decodeHTML(json.html) || document.createElement(\"span\");\r\n                        cart.insertBefore(newNode, parent);\r\n                    }\r\n                    parent.remove();\r\n                }\r\n                else {\r\n                    document.body.dispatchEvent(EcommerceClassRepo.showAlertEvent(json.message));\r\n                }\r\n                this.updateTotals();\r\n            }\r\n        });\r\n    }\r\n    returnShopping() {\r\n        history.back();\r\n    }\r\n    updateItemEvent(cartItem) {\r\n        return new CustomEvent(\"update-cart-item\", {\r\n            detail: cartItem\r\n        });\r\n    }\r\n    removeCartItemEvent(parent) {\r\n        return new CustomEvent(\"remove-cart-item\", {\r\n            detail: {\r\n                \"parent\": parent\r\n            }\r\n        });\r\n    }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { AddToCartRepo } from \"./implementation/AddToCartRepo\";\r\nimport { CheckoutRepo } from \"./implementation/CheckoutRepo\";\r\nimport { EcommerceClassRepo } from \"./implementation/EcommerceClassRepo\";\r\nimport { ShoppingCartRepo } from \"./implementation/ShoppingCartRepo\";\r\nexport function InitializeEcommerceService(type) {\r\n    var classObject;\r\n    switch (type) {\r\n        case \"AddToCart\":\r\n            classObject = new AddToCartRepo();\r\n            break;\r\n        case \"Checkout\":\r\n            classObject = new CheckoutRepo();\r\n            break;\r\n        case \"EcommerceClass\":\r\n            classObject = EcommerceClassRepo;\r\n            break;\r\n        case \"ShoppingCart\":\r\n            classObject = new ShoppingCartRepo();\r\n            break;\r\n    }\r\n    return classObject;\r\n}\r\nwindow.InitializeEcommerceService = function (type) {\r\n    return InitializeEcommerceService(type);\r\n};\r\n"],"sourceRoot":""}